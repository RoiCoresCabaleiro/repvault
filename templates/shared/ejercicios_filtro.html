{# templates/shared/ejercicios_filtro.html #}

{% macro ejercicios_filtro(ejercicios_disponibles, grupos_validos, equipamientos_validos, grupo_filtro, equipamiento_filtro) %}
    <!-- ðŸŸ¦ COLUMNA DERECHA: Filtros y aÃ±adir ejercicios -->
    <div style="flex: 1; max-height: 400px; overflow-y: auto; padding: 0 10px;">
        <div style="position: sticky; top: 0; background: white; padding-bottom: 20px;">
            <h3>AÃ±adir ejercicio:</h3>
            <label>Grupo muscular:</label>
            <select name="grupo_muscular">
                <option value="">-- Todos --</option>
                {% for g in grupos_validos %}
                <option value="{{ g }}"{% if g == grupo_filtro %} selected{% endif %}>{{ g }}</option>
                {% endfor %}
            </select>

            <label style="margin-left: 20px;">Equipamiento:</label>
            <select name="equipamiento">
                <option value="">-- Todos --</option>
                {% for e in equipamientos_validos %}
                <option value="{{ e }}"{% if e == equipamiento_filtro %} selected{% endif %}>{{ e }}</option>
                {% endfor %}
            </select>

            <button style="margin-left: 20px;" type="submit" name="filtrar">Filtrar</button>
        </div>

        {% for soid, ej in ejercicios_disponibles %}
        <div style="margin-bottom: 8px;">
            {{ ej.nombre }}
            <button type="submit" name="agregar" value="{{ soid }}" style="margin-left: 10px;">AÃ±adir</button>
        </div>
        {% endfor %}
    </div>
{% endmacro %}